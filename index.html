<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Minimal Money Manager</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
      
      * {
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      }
      
      .glass-effect {
        backdrop-filter: blur(20px);
        background: rgba(255, 255, 255, 0.85);
        border: 1px solid rgba(255, 255, 255, 0.2);
      }
      
      .gradient-bg {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      }
      
      .input-focus:focus {
        outline: none;
        border-color: #667eea;
        box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
      }
      
      .btn-primary {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        transition: all 0.3s ease;
        transform: translateY(0);
      }
      
      .btn-primary:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
      }
      
      .btn-secondary {
        background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
        transition: all 0.3s ease;
        transform: translateY(0);
      }
      
      .btn-secondary:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 25px rgba(17, 153, 142, 0.3);
      }
      
      .entry-item {
        transition: all 0.3s ease;
        border-left: 4px solid transparent;
      }
      
      .entry-item:hover {
        transform: translateX(5px);
        border-left-color: #667eea;
        background: rgba(102, 126, 234, 0.05);
      }
      
      .income-entry {
        border-left-color: #10b981;
      }
      
      .expense-entry {
        border-left-color: #ef4444;
      }
      
      .balance-display {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
      }
      
      .floating-card {
        animation: float 6s ease-in-out infinite;
      }
      
      @keyframes float {
        0%, 100% { transform: translateY(0px); }
        50% { transform: translateY(-10px); }
      }
      
      .fade-in {
        animation: fadeIn 0.5s ease-in-out;
      }
      
      @keyframes fadeIn {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
      }
      
      .pulse-dot {
        animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
      }
      
      @keyframes pulse {
        0%, 100% { opacity: 1; }
        50% { opacity: .5; }
      }
    </style>
  </head>
  <body class="gradient-bg min-h-screen p-4">
    <div class="max-w-md mx-auto">
      <!-- Header -->
      <div class="text-center mb-8 pt-8">
        <div class="inline-flex items-center justify-center w-16 h-16 glass-effect rounded-full mb-4 floating-card">
          <span class="text-2xl">ðŸ’°</span>
        </div>
        <h1 class="text-3xl font-bold text-white mb-2">Money Manager</h1>
        <p class="text-white/70 text-sm">Track your finances with elegance</p>
      </div>

      <!-- Balance Display -->
      <div class="glass-effect rounded-2xl p-6 mb-6 text-center floating-card">
        <p class="text-sm text-gray-600 mb-2">Current Balance</p>
        <div class="text-4xl font-bold balance-display mb-4" id="currentBalance">â‚¹54,000</div>
        <div class="flex items-center justify-center space-x-2 mb-4">
          <div class="w-2 h-2 bg-green-500 rounded-full pulse-dot"></div>
          <span class="text-xs text-gray-500">Live tracking</span>
        </div>
        <button 
          onclick="toggleStartingBalanceInput()" 
          class="text-xs text-gray-500 hover:text-gray-700 transition-colors underline"
        >
          Update Starting Balance
        </button>
      </div>

      <!-- Starting Balance Input (Hidden by default) -->
      <div id="startingBalanceSection" class="glass-effect rounded-2xl p-6 mb-6 fade-in hidden">
        <h2 class="text-lg font-semibold mb-4 text-gray-700">Set Starting Balance</h2>
        <div class="space-y-4">
          <div>
            <label class="block text-sm font-medium text-gray-600 mb-2">Starting Amount</label>
            <input 
              type="number" 
              id="startingBalance" 
              class="w-full p-4 border border-gray-200 rounded-xl bg-white/70 input-focus text-lg" 
              placeholder="Enter starting balance"
              value="54000"
            />
          </div>
          <div class="flex space-x-3">
            <button 
              onclick="setStartingBalance()" 
              class="flex-1 btn-primary text-white py-3 rounded-xl font-medium"
            >
              Set Balance
            </button>
            <button 
              onclick="toggleStartingBalanceInput()" 
              class="flex-1 bg-gray-300 text-gray-700 py-3 rounded-xl font-medium hover:bg-gray-400 transition-colors"
            >
              Cancel
            </button>
          </div>
        </div>
      </div>

      <!-- Input Section -->
      <div class="glass-effect rounded-2xl p-6 mb-6 fade-in">
        <h2 class="text-lg font-semibold mb-6 text-gray-700">Add Transaction</h2>
        
        <div class="space-y-4">
          <div>
            <label class="block text-sm font-medium text-gray-600 mb-2">Amount</label>
            <input 
              type="number" 
              id="amount" 
              class="w-full p-4 border border-gray-200 rounded-xl bg-white/70 input-focus text-lg" 
              placeholder="Enter amount"
            />
          </div>

          <div>
            <label class="block text-sm font-medium text-gray-600 mb-2">Type</label>
            <select id="type" class="w-full p-4 border border-gray-200 rounded-xl bg-white/70 input-focus">
              <option value="expense">ðŸ’¸ Expense</option>
              <option value="income">ðŸ’° Income</option>
            </select>
          </div>

          <div>
            <label class="block text-sm font-medium text-gray-600 mb-2">Description</label>
            <input 
              type="text" 
              id="description" 
              class="w-full p-4 border border-gray-200 rounded-xl bg-white/70 input-focus" 
              placeholder="What was this for?"
            />
          </div>

          <button 
            onclick="addEntry()" 
            class="w-full btn-primary text-white py-4 rounded-xl font-medium"
          >
            Add Transaction
          </button>
        </div>
      </div>

      <!-- Transaction History -->
      <div class="glass-effect rounded-2xl p-6 mb-6 fade-in">
        <div class="flex items-center justify-between mb-4">
          <h2 class="text-lg font-semibold text-gray-700">Recent Transactions</h2>
          <div class="text-xs text-gray-500 bg-gray-100 px-3 py-1 rounded-full" id="transactionCount">
            0 transactions
          </div>
        </div>
        
        <div id="log" class="space-y-3 max-h-80 overflow-y-auto"></div>
        
        <div id="emptyState" class="text-center py-8">
          <div class="text-gray-400 mb-2">ðŸ“Š</div>
          <p class="text-gray-500 text-sm">No transactions yet</p>
          <p class="text-gray-400 text-xs">Add your first transaction above</p>
        </div>
      </div>

      <!-- Actions -->
      <div class="space-y-3">
        <button 
          onclick="exportToExcel()" 
          class="w-full btn-secondary text-white py-4 rounded-xl font-medium"
        >
          ðŸ“Š Export to Excel
        </button>
        
        <button 
          onclick="resetBalance()" 
          class="w-full bg-white/20 text-white py-3 rounded-xl font-medium border border-white/30 hover:bg-white/30 transition-all"
        >
          ðŸ”„ Reset Balance
        </button>
      </div>
    </div>

    <script>
      let entries = [];
      let startBalance = 54000;
      let currentBalance = startBalance;

      function updateBalanceDisplay() {
        const balanceEl = document.getElementById("currentBalance");
        balanceEl.textContent = `â‚¹${currentBalance.toLocaleString()}`;
        
        // Add a subtle animation when balance changes
        balanceEl.style.transform = 'scale(1.05)';
        setTimeout(() => {
          balanceEl.style.transform = 'scale(1)';
        }, 200);
      }

      function toggleStartingBalanceInput() {
        const section = document.getElementById("startingBalanceSection");
        const isHidden = section.classList.contains("hidden");
        
        if (isHidden) {
          section.classList.remove("hidden");
          document.getElementById("startingBalance").value = startBalance;
        } else {
          section.classList.add("hidden");
        }
      }

      function setStartingBalance() {
        const newStartBalance = parseFloat(document.getElementById("startingBalance").value);
        
        if (isNaN(newStartBalance) || newStartBalance < 0) {
          showNotification("Please enter a valid starting balance", "error");
          return;
        }
        
        // Calculate the difference to adjust current balance
        const difference = newStartBalance - startBalance;
        
        // Update balances
        startBalance = newStartBalance;
        currentBalance = currentBalance + difference;
        
        // Update all existing entries' balances
        entries.forEach((entry, index) => {
          entry.previousBalance += difference;
          entry.newBalance += difference;
        });
        
        // Update UI
        updateBalanceDisplay();
        renderLog();
        toggleStartingBalanceInput();
        
        showNotification(`Starting balance updated to â‚¹${newStartBalance.toLocaleString()}`, "success");
      }

      function updateTransactionCount() {
        const countEl = document.getElementById("transactionCount");
        countEl.textContent = `${entries.length} transaction${entries.length !== 1 ? 's' : ''}`;
      }

      function renderLog() {
        const log = document.getElementById("log");
        const emptyState = document.getElementById("emptyState");
        
        log.innerHTML = "";
        
        if (entries.length === 0) {
          emptyState.style.display = 'block';
          return;
        }
        
        emptyState.style.display = 'none';
        
        entries.slice(-10).reverse().forEach((entry, index) => {
          const div = document.createElement("div");
          div.className = `entry-item p-4 rounded-xl bg-white/50 ${entry.type === 'income' ? 'income-entry' : 'expense-entry'}`;
          
          const isIncome = entry.type === 'income';
          const icon = isIncome ? 'ðŸ’°' : 'ðŸ’¸';
          const sign = isIncome ? '+' : '-';
          const textColor = isIncome ? 'text-green-600' : 'text-red-600';
          
          div.innerHTML = `
            <div class="flex items-center justify-between">
              <div class="flex items-center space-x-3">
                <div class="text-lg">${icon}</div>
                <div>
                  <div class="font-medium text-gray-700">${entry.description}</div>
                  <div class="text-xs text-gray-500">
                    ${new Date(entry.timestamp).toLocaleDateString('en-IN', { 
                      day: '2-digit', 
                      month: 'short', 
                      year: 'numeric' 
                    })} â€¢ Balance: â‚¹${entry.newBalance.toLocaleString()}
                  </div>
                </div>
              </div>
              <div class="text-right">
                <div class="font-semibold ${textColor}">${sign}â‚¹${entry.amount.toLocaleString()}</div>
                <div class="text-xs text-gray-500">
                  ${new Date(entry.timestamp).toLocaleTimeString('en-IN', { 
                    hour: '2-digit', 
                    minute: '2-digit' 
                  })}
                </div>
              </div>
            </div>
          `;
          
          log.appendChild(div);
        });
        
        updateTransactionCount();
      }

      function addEntry() {
        const amount = parseFloat(document.getElementById("amount").value);
        const type = document.getElementById("type").value;
        const description = document.getElementById("description").value.trim();
        
        if (isNaN(amount) || amount <= 0) {
          showNotification("Please enter a valid amount", "error");
          return;
        }
        
        if (!description) {
          showNotification("Please add a description", "error");
          return;
        }

        const previousBalance = currentBalance;
        const newBalance = type === "income" ? previousBalance + amount : previousBalance - amount;

        const entry = { 
          previousBalance, 
          amount, 
          type, 
          newBalance, 
          description,
          timestamp: new Date().toISOString()
        };
        
        entries.push(entry);
        currentBalance = newBalance;
        
        // Clear inputs
        document.getElementById("amount").value = "";
        document.getElementById("description").value = "";
        
        // Update UI
        updateBalanceDisplay();
        renderLog();
        
        showNotification(`Transaction added successfully!`, "success");
      }

      function resetBalance() {
        if (confirm("Are you sure you want to reset your balance and clear all transactions?")) {
          entries = [];
          currentBalance = startBalance;
          updateBalanceDisplay();
          renderLog();
          showNotification("Balance reset successfully!", "success");
        }
      }

      function exportToExcel() {
        if (entries.length === 0) {
          showNotification("No transactions to export", "error");
          return;
        }
        
        // Create CSV content with starting balance info
        let csvContent = "";
        
        // Add header information
        csvContent += `Money Manager Export\n`;
        csvContent += `Export Date: ${new Date().toLocaleDateString('en-IN')}\n`;
        csvContent += `Starting Balance: â‚¹${startBalance.toLocaleString()}\n`;
        csvContent += `Current Balance: â‚¹${currentBalance.toLocaleString()}\n`;
        csvContent += `Total Transactions: ${entries.length}\n`;
        csvContent += `\n`; // Empty line
        
        // Add transaction headers
        const headers = ["Date", "Time", "Description", "Type", "Amount", "Previous Balance", "New Balance"];
        csvContent += headers.join(",") + "\n";
        
        // Add starting balance row
        csvContent += `Starting Balance,,,Starting Balance,${startBalance},0,${startBalance}\n`;
        
        // Add transaction rows
        const rows = entries.map((e) => [
          new Date(e.timestamp).toLocaleDateString('en-IN'),
          new Date(e.timestamp).toLocaleTimeString('en-IN', { hour: '2-digit', minute: '2-digit' }),
          `"${e.description}"`, // Wrap in quotes to handle commas in descriptions
          e.type,
          e.amount,
          e.previousBalance,
          e.newBalance
        ]);
        
        csvContent += rows.map(row => row.join(",")).join("\n");
        
        const blob = new Blob([csvContent], { type: "text/csv" });
        const link = document.createElement("a");
        link.href = URL.createObjectURL(blob);
        link.download = `money_log_${new Date().toISOString().split('T')[0]}.csv`;
        link.click();
        
        showNotification("Export downloaded successfully!", "success");
      }

      function showNotification(message, type) {
        const notification = document.createElement("div");
        notification.className = `fixed top-4 right-4 p-4 rounded-xl text-white font-medium z-50 transform transition-all duration-300 ${
          type === 'success' ? 'bg-green-500' : 'bg-red-500'
        }`;
        notification.textContent = message;
        
        document.body.appendChild(notification);
        
        setTimeout(() => {
          notification.style.transform = 'translateX(100%)';
          setTimeout(() => {
            document.body.removeChild(notification);
          }, 300);
        }, 3000);
      }

      // Initialize
      updateBalanceDisplay();
      renderLog();
      
      // Add enter key support
      document.addEventListener('keypress', function(e) {
        if (e.key === 'Enter' && (e.target.id === 'amount' || e.target.id === 'description')) {
          addEntry();
        }
      });
    </script>
  </body>
</html>
